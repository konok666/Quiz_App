<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard | Quiz System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="../css/style.css" />
</head>

<body>

<div class="admin-layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h2 class="logo">Quiz Admin</h2>

    <ul class="menu">
      <li onclick="showSection('users')">üë§ Registered Users</li>
      <li onclick="showSection('questions')">‚ùì Quiz Questions</li>
      <li onclick="showSection('addQuestion')">‚ûï Add / Edit Question</li>
      <li id="logoutBtn" class="danger">üö™ Logout</li>
    </ul>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">
    <h2 id="adminWelcome"></h2>

    <!-- USERS -->
    <section id="users" class="section">
      <h3>Registered Users</h3>
      <ul id="usersList"></ul>
    </section>

    <!-- QUESTIONS -->
    <section id="questions" class="section hidden">
      <h3>Quiz Questions</h3>
      <ul id="questionsList"></ul>
    </section>

    <!-- ADD / EDIT -->
    <section id="addQuestion" class="section hidden">
      <h3>Add / Edit Question</h3>

      <form id="questionForm">
        <input type="hidden" id="questionId" />

        <input type="text" id="questionText" placeholder="Question Text" required />

        <input type="text" id="option0" placeholder="Option 1" required />
        <input type="text" id="option1" placeholder="Option 2" required />
        <input type="text" id="option2" placeholder="Option 3" required />
        <input type="text" id="option3" placeholder="Option 4" required />

        <select id="correctAnswer" required>
          <option value="">Correct Option</option>
          <option value="0">Option 1</option>
          <option value="1">Option 2</option>
          <option value="2">Option 3</option>
          <option value="3">Option 4</option>
        </select>

        <select id="difficulty" required>
          <option value="">Difficulty</option>
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>

        <button type="submit">Save Question</button>
      </form>

      <p id="adminError" class="error"></p>
      <p id="adminSuccess" class="success"></p>
    </section>
  </main>

</div>

<script src="../js/storage.js"></script>
<script src="../js/admin.js"></script>

<!-- AUTH + SIDEBAR LOGIC -->
<script>
  if (localStorage.getItem("role") !== "admin") {
    window.location.href = "admin-login.html";
  } else {
    document.getElementById("adminWelcome").innerText = "Welcome Admin üëë";
  }

  function showSection(id) {
    document.querySelectorAll(".section").forEach(sec =>
      sec.classList.add("hidden")
    );
    document.getElementById(id).classList.remove("hidden");
  }

  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("role");
    window.location.href = "admin-login.html";
  });
</script>

</body>
</html>
